?xml version="1.0" encoding="UTF-8"?>
<procedure-natures xmlns="http://www.ekylibre.org/XML/2013/product-natures">
  <procedure-nature code="wheat_crop">
    <name xml:lang="fra">Culture annuelle</name>
    <name xml:lang="eng">Annual crop</name>
    <code nomenclature="Nomen" value="C-A"/>
    <description xml:lang="fra" source="internal">Procédure modèle permettant de décrire les opérations successives pour cultiver une sole annuelle de produit végétaux</description>
	<parameters>
    	<parameter code=[a1] type="activity" nature="production" label="Activité"/>
    	<parameter code=[c1] type="campaign" label="Campagne"/>
    	<parameter code=[l1] type="landparcel" properties="producible" pre-indicators-state="production::empty" label="Parcelle"/>
    	<parameter code=[m1] type="matter" nature="manure" variety="organic-matter" label="Fumier"/>
    	<parameter code=[m2] type="matter" nature="seed" variety="wheat" label="Semence"/>
    	<parameter code=[m3] type="matter" nature="fertilizer" variety="mineral-matter" label="Engrais"/>
    	<parameter code=[m4] type="matter" nature="phytosanitary" variety="herbicide" label="Produits phytosanitaire (Herbicides)"/>
    	<parameter code=[m5] type="matter" nature="phytosanitary" variety="fungicide" label="Produits phytosanitaire (Fongicides)"/>
		<parameter code=[m6] type="matter" nature="--" variety=[m2].variety label="Grain de blé"/>
    	<parameter code=[m7] type="matter" nature="--" variety=[m2].variety label="Paille de blé"/>
		<parameter code=[v1] type="vegetal" nature="crop" variety="vegetal" label="Culture"/>
    	<parameter type="place" name="hangar" properties="storage" label="Emplacement de la remorque"/>
    	<parameter type="tool" name="remorque" properties="towable,storage,empty" label="Remorque"/>
	</parameters>
	<conditions>
		<condition>in=[a1]&&[c1]</condition>
	</conditions>
		<operation-nature code="fertilize" required="false" working-set="organic-fertilization">
			<operation-task>working-set moves-to [l1]</operation-task>
			<operation-task>working-set acts-on [l1]</operation-task>
			<operation-task>[l1] consumes [m1]</operation-task>
		</operation-nature>
		<operation-nature code="plowing" required="true" target-indicators-state="ground-appearance::raw" working-set="soil-working">
			<operation-task>working-set moves-to [l1]</operation-task>
			<operation-task>working-set acts-on [l1]</operation-task>
			<operation-task>working-set modify [l1] on indicators.ground-appearance</operation-task>
		</operation-nature>
	    <operation-nature code="surperficial-plowing" required="true" target-indicators-state="sowable::true" working-set="soil-working">
	    	<operation-task>working-set moves-to [l1]</operation-task>
	    	<operation-task>working-set acts-on [l1]</operation-task>
			<operation-task>working-set modify [l1] on indicators.sowable</operation-task>
	    </operation-nature>
	    <operation-nature code="sowing" required="true" target-indicators-state="production::sown" working-set="sowing">
			<operation-task>[sowing] moves-to [l1]</operation-task>
			<operation-task>[sowing] acts-on [l1]</operation-task>
			<operation-task>[v1] consume [m2]</operation-task>
			<operation-task>[sowing] modify [l1] on indicators.production</operation-task>
			<operation-task>[l1] produce [v1](quantity::?, unit::?, variety::[m2].variety)</operation-task>			
		</operation-nature>
		<operation-nature code="fertilize" required="true" working-set="mineral-fertilization">
			<operation-task>working-set moves-to [v1]</operation-task>
			<operation-task>working-set acts-on [v1]</operation-task>
			<operation-task>[v1] consumes [m3]</operation-task>
		</operation-nature>
	    <operation-nature code="treat" required="false" working-set="chemical-treatment">
			<operation-task>working-set moves-to [v1]</operation-task>
			<operation-task>working-set acts-on [v1]</operation-task>
			<operation-task>[v1] consumes [m4]</operation-task>
		</operation-nature>
	    <operation-nature code="treat" required="false" working-set="phytosanitary-treatment">
			<operation-task>working-set moves-to [v1]</operation-task>
			<operation-task>working-set acts-on [v1]</operation-task>
			<operation-task>[v1] consumes [m5]</operation-task>
		</operation-nature>
	    <operation-nature code="harvest-seed" required="true" working-set="harvest">
			<operation-task>working-set moves-to [v1]</operation-task>
			<operation-task>working-set acts-on [v1]</operation-task>
			<operation-task>[v1] produce [m6](quantity::?, unit::?, variety::[v1].variety)</operation-task>
			<operation-task>[v1] produce [m7](quantity::?, unit::?, variety::[v1].variety)</operation-task>			
		</operation-nature>
	    <operation-nature code="transport-seed" required="true" working-set="transport">
			<operation-task>working-set moves-to [m6]</operation-task>
			<operation-task>working-set catches [m6]</operation-task>
		    <operation-task>[m6] moves-to [l2]</operation-task>
		</operation-nature>
  </procedure-nature>
</procedure-natures>