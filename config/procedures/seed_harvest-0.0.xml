<?xml version="1.0"?>
<procedures xmlns="http://www.ekylibre.org/XML/2013/procedures">
  <!-- ######################################## MOISSONNER ########################################### -->
  <procedure name="seed_harvest" natures="production" version="1" status="frozen">
    <variables>
      <variable name="silo" variety="settlement" abilities="store(plant)"/>
      <variable name="driver" variety="worker"/>
      <!-- paramètre réprésentant des objets de type Humain qui possede la compétence "Conduire un ensemble tracteur + épandeur"  -->
      <variable name="tractor" variety="equipment" abilities="tow,catch"/>
      <!-- paramètre réprésentant des objets qui possede la compétence "Tracter"  -->
      <variable name="trailer" variety="equipment" abilities="store_fluid,transport"/>
      <!-- paramètre réprésentant des objets qui possede la compétence "Semer"  -->
      <variable name="cropper_driver" variety="worker" abilities="cropper_driving" />
      <!-- paramètre réprésentant des objets de type Humain qui possede la compétence "Conduire un ensemble de semis" -->
      <variable name="cropper" type="equipment" abilities="harvest(plant)" />
      <!-- paramètre réprésentant des objets de type Humain qui possede la compétence "Conduire un ensemble de semis" -->
      <variable name="culture" variety="plant"/>
      <variable name="grains" same-variety-of="culture" derivative="grain" new="quantity=?, unit=?" roles="production-output"/>
      <variable name="straw" same-variety-of="culture" derivative= "straw" new="quantity=?, unit=?" roles="production-output"/>
    </variables>
    <operation name="transport_0100">
      <task do="[cropper-driver] moves-in [cropper]"/><!-- le chauffeur se déplace vers la moissonneuse et rentre dedant (?) -->
    </operation>
    <operation name="transport_0200">
      <task do="[cropper] moves-to [culture]"/><!-- le chauffeur et la moissonneuse se déplace vers le lieu à récolter -->
    </operation>
    <operation name="seed_harvest_0300">
      <task do="[cropper] acts-on [culture]"><!-- tant que le [cropper] travaille (? = sous-entendu la moissonneuse tourne,le conducteur roule, le batteur tourne) les sub-task tournent -->
        <task do="[culture] produce [grains]"/><!-- le traitement tombe sur la sole de blé car le pulvé tourne (?) -->
        <task do="[grains] moves-in [cropper]"/>
        <task do="[culture] produce [straw]"/><!-- la sole de blé consomme le traitement épandu car il se dépose sur les feuilles des plants de blé -->
        <task do="[straw] moves-in [culture]"/>
      </task>
    </operation>
    <operation name="transport_0400">
      <task do="[driver] moves-in [tractor]"/><!-- le chauffeur se déplace vers le tracteur et rentre dedant (?) -->
    </operation>
    <operation name="transport_0500">
      <task do="[tractor] moves-to [trailer]"/><!-- le chauffeur et le tracteur se déplace vers le lieu actuel de la remorque-->
    </operation>
    <operation name="catch_0600">
      <task do="[tractor] catches [trailer]"/><!-- le chauffeur attache la remorque au tracteur -->
    </operation>
    <operation name="transport_0700">
      <task do="[tractor] moves-to [culture]"/><!-- déplacement dans la culture -->
    </operation>
    <operation name="transport_0800">
      <!-- Le transfert doit pouvoir se faire autant de fois que necessaire notions d' aller/retour -->
      <task do="[cropper] moves-to [tractor]"/><!-- la moissoneuse se déplace vers le tracteur et la remorque -->
    </operation>
    <operation name="transfert_0900">
      <task do="[grains] moves-in [trailer]"/><!-- la moissoneuse vide ses grains dans la remorque -->
    </operation>
    <operation name="transport_1000">
      <task do="[tractor] moves-to [silo]"/><!-- le tracteur avec sa remorque pleine va au silo -->
    </operation>
    <operation name="transfert_1100">
      <task do="[grains] moves-in [silo]"/><!-- le tracteur vide ses grains dans le silo -->
    </operation>
  </procedure>
</procedures>
