<?xml version="1.0"?>
<procedures xmlns="http://www.ekylibre.org/XML/2013/procedures">
  <procedure name="animal_artificial_insemination" natures="animal_fecondation" version="0">
    <variables>
      <variable name="animal" variety="animal" abilities="produce(animal)" roles="animal_fecondation-target"/>
      <variable name="vial" variety="vial" derivative-of="variety: animal" abilities="inseminate(animal)" roles="animal_fecondation-input_origin"/>
      <variable name="vial_to_give" variety=":vial" derivative-of=":vial" new="parted-from: vial" roles="animal_fecondation-input" default-name="{{variant}} [{{birth_day}}/{{birth_month}}/{{birth_year}}] ({{container}})">
        <handler indicator="population"/>
      </variable>
      <variable name="inseminator" abilities="administer_inseminate(animal)" roles="animal_fecondation-doer"/>
    </variables>
    <operations>
      <operation id="1">
        <!-- Operation 100 -->
        <task do="[vial] parts with [vial_to_give]"/>
        <task do="[vial_to_give] moves in [inseminator]"/>
        <!-- Operation 200 (10 minutes) -->
        <task do="[inseminator] moves at [animal]"/>
        <!-- Operation 300 -->
        <task do="[animal] consumes [vial_to_give]"/>
        <!-- Operation 400 -->
        <task do="animal|mammalia_reproduction_state is measured"/>
        <task do="animal|healthy is measured"/>
        <task do="animal|mammalia_reproduction_method_embryo_transplant is measured"/>
      </operation>
    </operations>
  </procedure>
</procedures>
