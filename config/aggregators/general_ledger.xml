<?xml version="1.0" encoding="UTF-8"?>
<aggregators xmlns="http://www.ekylibre.org/XML/2013/aggregators">
  <aggregator name="general_ledger" version="0.0" category="exploitation">
    <parameters>
      <parameter name="started_on" type="date" default="Date.today - 12.months"/>
      <parameter name="stopped_on" type="date" default="Date.today"/>
    </parameters>
    <section name="financial_years">
      <variable name="company" value="Entity.of_company"/>
      <property name="entity_name" value="company.full_name"/>
      <property name="address" value="company.default_mail_address.coordinate"/>
      <sections for="financial_year" in="FinancialYear.currents">
        <property name="id" of="financial_year" level="api"/>
        <title name="code" of="financial_year"/>
        <sections for="account" in="Account.all">
          <variable name="balance" value="account.journal_entry_items_calculate(:balance, started_on, stopped_on)"/>
          <title name="label" of="account"/>
          <property name="id" of="account" level="api"/>
          <property name="number" of="account"/>
          <property name="name" of="account"/>          
        </sections>
      </sections>
    </section>
  </aggregator>
</aggregators>