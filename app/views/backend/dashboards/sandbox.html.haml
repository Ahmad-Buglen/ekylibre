%h1= "Map test"

#map{style: "height: 400px"}

= @coordinates.inspect

:javascript
  var map = L.map('map').setView(#{[@coordinates.latitude, @coordinates.longitude].inspect}, 18);

  // add an OpenStreetMap tile layer
  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);

  // Initialise the FeatureGroup to store editable layers
  var drawnItems = new L.FeatureGroup();
  map.addLayer(drawnItems);

  var zone = L.polygon(#{@points.inspect}).addTo(drawnItems);

  // Initialise the draw control and pass it the FeatureGroup of editable layers
  var drawControl = new L.Control.Draw({
    edit: {
      featureGroup: drawnItems
    }
  });

  map.on('draw:created', function(e) {
    drawnItems.addLayer(e.layer);
  });

  map.addControl(drawControl);

