.activity-productions
  - productions.each do |production|
    .activity-production
      .activity-production-infos
        = link_to(production.name, {action: :show, controller: :activity_productions, id: production.id})
        %span.pull-right= production.size.round(2).l(precision: 2) rescue nil
      .activity-production-chronology
        .chronology
          .grades
            - grades.each_with_index do |grade, index|
              .grade{class: (grade.month == 1 ? 'grade-start' : 'grade-middle') + ' ' + ((index == 0 || grade.month == 1) ? 'grade-year' : 'grade-month')}= ((index == 0 || grade.month == 1) ? grade.year.to_s : I18n.t('date.abbr_month_names')[grade.month])
          .periods
            - url_options = { action: :show, controller: :activity_productions, id: production.id }
            - html_options = {:title => production.name}
            = product_chronology_period(production, campaign, period_started_on, duration, url_options, html_options)
            .markers
              .interventions
                - unless production.interventions.nil?
                  = interventions_chronology_icons(production.interventions_by_weeks, period_started_on, duration, {class: "marker"})
              .crop-management-technique
                - url_options = {}
                - backgrond_color = 'rgba(0, 0, 0, 0.2)'
                - itk_icon = chronology_period_icon("initial", 'matter', {class: "marker"})
                = chronology_period(0.2, 0.2, backgrond_color, url_options, {nested_element: itk_icon, title: "Période de semis"})
                - itk_icon = chronology_period_icon("initial", 'drop', {class: "marker"})
                = chronology_period(0.38, 0.1, backgrond_color, url_options, {nested_element: itk_icon, title: "Période d'irrigation"})
                - itk_icon = chronology_period_icon("initial", 'tractor', {class: "marker"})
                = chronology_period(0.6, 0.1, backgrond_color, url_options, {nested_element: itk_icon, title: "Période de culture"})
