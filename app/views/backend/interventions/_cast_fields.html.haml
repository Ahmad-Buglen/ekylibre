- reference = variable
- f.object.reference_name = reference.name
.nested-fields.working-period
  = link_to_remove_nested_association('working-period', f)
  = f.input :reference_name, as: :hidden
  - if variable.input?
    = f.referenced_association :source_product, label: variable.human_name, source: {scope: reference.scope_hash.merge(availables: true)}
    = render 'quantifier_field', f: f, reference: variable
  - elsif variable.output?
    = f.referenced_association :variant, label: variable.human_name, source: {scope: reference.scope_hash.merge(availables: true)}
    = f.input :quantity
  - else
    = f.referenced_association :product, label: variable.human_name, source: {scope: reference.scope_hash.merge(availables: true)}
