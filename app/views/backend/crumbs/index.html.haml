:ruby
  crumbs = @interventions_crumbs
  interventions = {}
  previous_crumb = nil
  crumbs.each do |item|
    interventions[item[:name]] ||= []
    interventions[item[:name]] << item
    popup_content = []
    popup_content << {label: :nature, value: item[:nature] }
    popup_content << {label: :date, value: Crumb.find(item[:crumb_id]).read_at}
    popup_content << render('form', crumb: item[:crumb_id], previous: previous_crumb)
    item[:popup] = {content: popup_content}
    previous_crumb = item[:crumb_id]
  end

  production_supports = @production_supports

= beehive do |b|
  -b.cell :map do
    = render 'map', legend: :started_at, data: crumbs, production_supports: production_supports
  - b.cell :interventions do
    = render 'interventions', data: crumbs
  - interventions.each do |name, intervention|
    - b.cell intervention.first[:started_at].to_formatted_s(:long) do
      = render 'intervention', data: intervention
  