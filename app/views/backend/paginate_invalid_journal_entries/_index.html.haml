%span.list-pagination{data:{list_ref: "items-list"}}
  - limit  = 2
  - current_page = @invalid_entries.current_page
  - pages_count = @invalid_entries.total_pages
  - count = @invalid_entries_count
  - x = limit * (current_page - 1) + 1
  - y = (current_page < pages_count) ? current_page * limit : count
  %span.status= 'list.pagination.x_to_y_of_total'.t(x: x, y: y, total: count)
  %span.paginator
    %a{href: backend_paginate_invalid_journal_entries_path(page: current_page - 1), class: [("btn previous-page"),("disabled" if current_page == 1)], data: {remote: :true}}
      %i
    %a{href: backend_paginate_invalid_journal_entries_path(page: current_page + 1), class: [("btn next-page"),("disabled" if current_page == @invalid_entries.total_pages)], data: {remote: :true}}
      %i
%table
  %thead
    %th= Journal.name
    %th= JournalEntryItem.human_attribute_name(:entry_number)
    %th= JournalEntryItem.human_attribute_name(:printed_on)
    %th= JournalEntryItem.human_attribute_name(:account)
    %th= JournalEntryItem.human_attribute_name(:name)
    %th= JournalEntryItem.human_attribute_name(:debit)
    %th= JournalEntryItem.human_attribute_name(:credit)
  %tbody.first-item
    - @invalid_entries.each do |entry|
      - entry.items.each do |item|
        - first_item = (entry.items.first === item)
        %tr{class: ("first-item" if first_item) }
          %td= link_to(entry.journal.name, { controller: :journals, action: :show, id: entry.journal.id} ) if first_item
          %td= link_to(entry.number, { controller: :journal_entry_items, action: :show, id: item.id} ) if first_item
          %td= entry.printed_on.strftime("%d/%m/%Y") if first_item
          %td= link_to(item.account_label, { controller: :accounts, action: :show, id: item.account.id})
          %td= truncate(item.name, length: 50)
          %td= item.debit
          %td= item.credit
