- components.each  do |component|
  .component
    .component-block
      .component-title
        = "#{component.name}(#{component.id}): "
        - if component.part_product_nature_variant
          = link_to component.part_product_nature_variant.name, backend_product_nature_variant_path(component.part_product_nature_variant)

      - if resource.remaining_working_lifespan || resource.remaining_lifespan
        .component-status
          = lights(product.wear_status(component))
        .component-life
          = :x_hours_worked.tl count: product.working_life_of(component).to_f(:hour).round
      .component-wear
        - if product.replaced_at(component)
          %span{title: product.replaced_at(component).l }= relative_distance_in_words product.replaced_at(component)
        - else
          = :original_component.tl
      .component-documentation
        - if component.part_product_nature_variant
          = dropdown_menu_button(:documentation.tl, icon: false) do |menu|
            - puts component.part_product_nature_variant.inspect
            - component.part_product_nature_variant.attachments.each do |attachment|
              - menu.item attachment.name, {controller: 'backend/documents', id: attachment.document_id, action: :show, format: :pdf }
      .component-replacement
        = tool_to "Remplacer l'élément", {}
    = render 'composition', product: product, components: component.children


  / %table
  /   .component
  /     %td
  /       = tool_to "Remplacer l'élément", {}
  /     / %td
  /     /   = dropdown_menu_button(:documentation.tl, icon: false) do |menu|
  /     /     - puts component.part_product_nature_variant.inspect
  /     /     - component.part_product_nature_variant.attachments.each do |attachment|
  /     /       - menu.item attachment.name, {controller: 'backend/documents', id: attachment.document_id, action: :show, format: :pdf }
  /     %td
  /       = "#{component.name}: "
  /       = link_to component.part_product_nature_variant.name, backend_product_nature_variant_path(component.part_product_nature_variant)

  / = render 'composition', variant: component.part_product_nature_variant
