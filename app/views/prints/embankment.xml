<?xml version="1.0"?>
<template title="Example" lang="fr" version="2.0">
  <infos>
    <info name="authors">Thibaud Mérigon, Brice Texier</info>
  </infos>
  <parameters>
    <parameter name="embankment" nature="embankment">Encaissement</parameter>
  </parameters>
  <document unit="mm" size="10" title="client.label">
    <page format="A4" margin="10mm">
      <part height="95mm">
        <set>
          <text value="{{embankment.company}}" size="7mm"/>
          <set left=" 100mm, 35mm">
            <text value=" @embankment.bank_account.bank_name" size="11" font="courier"/>
	    <text value=" account_line size="11 top="top2 font=""courier"/>
            </set>
	</set>
      </part>

      <part height="40mm"> 
        <set>
	  if @current_company.default_contact.line_6_city.nil?
          "Le "+I18n.localize(@embankment.created_on)
	  else
          <text value=" "À "+@current_company.default_contact.line_6_city+", le "+I18n.localize(@embankment.created_on)" />
	</set>
	<set> 
          <text value=" "Remise de chèques du "+I18n.localize(@embankment.created_on) top="15mm bold=":bold left="width/2 align=":centeréé" />
          <set>
	    if @embankment.bank_account.mode == "iban"
            <text value=" "À remettre sur le compte "+@embankment.bank_account.iban_label" top="25mm", :left="width/2" align=":center"/>
	    else
	    <text value=" "À remettre sur le compte "+@embankment.bank_account.formated_bban" top="25mm",  :left="width/2" align=":center"/>
	  </set>
	</set>
      </part>

      <table collection="embankment.payments">
	column "Client", "entity.full_name", 1.6
	column "Banque", "bank"
	column "N° Compte", "account_number", 1.3
	column "N° Chèque", "check_number"
	column "Date", "paid_on", 0.8 align="center"
	column "Montant", "amount", 0.65 align=":right"
      </table>
  
      <part height="20mm">
        <set left=" 65mm, 5mm">
          <text value=" @embankment.payments_number.to_s+" chèques pour un montant total de "+@embankment.amount.to_s size="12 italic=":italic"/>
	</set>
      </part>

      <part height="30mm">
        <set left=" 100mm">
          <text value="Signature" size="12" top="5mm" left="10mm"/>
								 line [[0, 1.5mm], [width, 1.5mm]],  :width="0.3"
														 line [[0, 25mm], [width, 25mm]],  :width="0.3"
																			       line [[0, 1.5mm], [0, 25mm]],  :width="0.3"
      line [[width, 1.5mm], [width, 25mm]],  :width="0.3"
    end
  end
  
      <part height="10mm">
        <set left=" 70mm, 5mm">
     text "Imprimé le "+I18n.localize(Time.now) size="8
    end
  end
  
end  
