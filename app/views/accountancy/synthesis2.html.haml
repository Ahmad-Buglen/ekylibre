= "BILAN"

%table.dyta
  %tr
    %th=tc :active_balance_sheet 
    %th=tc :account_value
    %th=tc :account_value if @previous_balance
  %tr
    %th=tc :account_fixed_assets
  %tr
    %th=tc :account_untangible_fixed_assets
       
      - @balance.select {|account| account[:number].to_s.match /^20/}.each do |account|
        - attr = cycle("even","odd")  
        %tr{:class=> attr}
          %td=account[:name]
          %td=account[:balance].abs
          %td=account[:previous_balance].abs if @previous_balance
      %tr
        %th=tc :account_tangible_fixed_assets
       
      - @balance.select {|account| account[:number].to_s.match /^(21|22|23)/}.each do |account|
        - attr = cycle("even","odd")  
        %tr{:class=> attr}
          %td=account[:name]
          %td=account[:balance].abs
          %td=account[:previous_balance].abs if @previous_balance
          
      %tr
        %th=tc :account_financial_assets
       
      - @balance.select {|account| account[:number].to_s.match /^(26|27)/}.each do |account|
        - attr = cycle("even","odd")  
        %tr{:class=> attr}
          %td=account[:name]
          %td=account[:balance].abs 
          %td=account[:previous_balance].abs if @previous_balance
      %tr
        %th=tc :active_fixed_sum 
        %th=@active_fixed_sum 
           
  %tr
    %th=tc :account_current_assets
    %th=""
  %tr
    %table.dyta
      %tr
        %th=tc :account_inventories_assets
        %th=tc :account_value
      - @balance.select {|account| account[:number].to_s.match /^3/ and account[:balance] <= 0}.each do |account|
        - attr = cycle("even","odd")  
        %tr{:class=> attr}
          %td=account[:name]
          %td=account[:balance].abs
          %td=account[:previous_balance].abs if @previous_balance

      %tr
        %th=tc :account_claims_assets
        %th=tc :account_value
      - @balance.select {|account| account[:number].to_s.match /^4/ and account[:balance] <= 0}.each do |account|
        - attr = cycle("even","odd")  
        %tr{:class=> attr}
          %td=account[:name]
          %td=account[:balance].abs
          %td=account[:previous_balance].abs if @previous_balance
      %tr
        %th=tc :account_others_assets
        %th=tc :account_value
      - @balance.select {|account| account[:number].to_s.match /^5/ and account[:balance] <= 0}.each do |account|
        - attr = cycle("even","odd")  
        %tr{:class=> attr}
          %td=account[:name]
          %td=account[:balance]
          %td=account[:previous_balance].abs if @previous_balance

      %tr
        %th=tc :account_accruals
        %th=tc :account_value
      - accrual_accounts.each do |account|
        - attr = cycle("even","odd")  
        %tr{:class=> attr}
          %td=account[:name]
          %td=account[:balance].abs

      %tr
        %th=tc :active_current_sum 
        %th=@active_current_sum 

      %tr
        %th=tc :active_sum 
        %th=@active_current_sum+@active_fixed_sum 

%table.dyta    
  %tr
    %th=tc :passive_balance_sheet 
    %th=""
  %tr
    %th=tc :account_equity
    %th=tc :account_value
  - @balance.select {|account| account[:number].to_s.match /^1[^5]/}.each do |account|
    - attr = cycle("even","odd")  
    %tr{:class=> attr}
      %td=account[:name]
      %td=account[:balance]
      %td=account[:previous_balance].abs if @previous_balance
  %tr
    %th=tc :passive_capital_sum
    %th=@passive_capital_sum
  %tr
    %th=tc :account_provision
    %th=tc :account_value
  - @balance.select {|account| account[:number].to_s.match /^15/}.each do |account|
    - attr = cycle("even","odd")  
    %tr{:class=> attr}
      %td=account[:name]
      %td=account[:balance]
      %td=account[:previous_balance].abs if @previous_balance
  %tr
    %th=tc :passive_stock_sum
    %th=@passive_stock_sum
  
  %tr
    %th=tc :account_debt
    %th=tc :account_value
  - @balance.select {|account| account[:number].to_s.match /^4/ and account[:balance] > 0}.each do |account|
    - attr = cycle("even","odd")  
    %tr{:class=> attr}
      %td=account[:name]
      %td=account[:balance]
      %td=account[:previous_balance].abs if @previous_balance
  %tr
    %th=tc :passive_debt_sum
    %th=@passive_debt_sum

  %tr
    %th=tc :passive_sum
    %th=@passive_stock_sum+@passive_debt_sum+@passive_capital_sum

%br
= "COMPTE DE RESULTAT"
%table.dyta
  %tr
    %th=tc :cost_income_statement 
    %th=""
  %tr
    %table.dyta
      %tr
        %th=tc :running_cost
        %th=""
      - @balance.select {|account| account[:number].to_s.match /^(6)/}.each do |account|
        - attr = cycle("even","odd")  
        %tr{:class=> attr}
          %td=account[:name]
          %td=account[:balance].abs 
      %tr
        %th=tc :total
        %th=@previous_cost_sum

  %tr
    %th=tc :finished_income_statement
    %th=""
  %tr
    %table.dyta
      %tr
        %th=tc :running_finished
        %th=""
      - @balance.select {|account| account[:number].to_s.match /^7/}.each do |account|
        - attr = cycle("even","odd")  
        %tr{:class=> attr}
          %td=account[:name]
          %td=account[:balance].abs
      %tr
        %th=tc :total
        %th=@previous_finished_sum	

  %tr
    %th=tc :result
    %th=@result

