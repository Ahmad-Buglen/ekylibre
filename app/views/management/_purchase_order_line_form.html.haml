-product_id = nil
=formalize do |f|
  -f.error :purchase_order_line
  -product_id = f.field :purchase_order_line, :product_id, :choices=>{:reflection=>:products, :include_blank=>""}
  -f.field :purchase_order_line, :quantity
  -f.field :purchase_order_line, :unit_id, :choices=>[]
  -if @price
    -f.field :price, :amount 
    -f.field :price, :tax_id ,:choices=>{:reflection=>:taxes}
  -if @current_company.locations.size > 1
    -f.field :purchase_order_line, :location_id, :choices=>{:reflection=>:locations}
  -f.field :purchase_order_line, :tracking_serial

=observe_field product_id, :url=>{:action => :price_find, :entity_id=>@purchase_order_line.order.supplier_id}, :frequency => 0.25, :with=>"purchase_order_line_product_id", :loading=>"onLoading()", :loaded=>"onLoaded()"

