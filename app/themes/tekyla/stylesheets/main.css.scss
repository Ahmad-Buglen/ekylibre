html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video, input, textarea, select, options {
  margin:0;
  padding:0;
  font-family: $base-font-family;
  vertical-align: middle;
  font-size: $fs-normal;
  color: $text-color;
  @include text-align(left);
}

td, th, a, p, input, textarea, select, div { font-size: $fs-normal;}
small, sup, sub { font-size: $fs-small; }
a:link, a:visited, a:focus { color: $link-color; text-decoration: none;}
// a:hover { color: $link-color; text-decoration: underline;}


//color, date, datetime, datetime-local, email, month, number, range, search, tel, time, url, week,
// input[type="button"], input[type="checkbox"], input[type="color"], input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="file"], input[type="hidden"], input[type="image"], input[type="month"], input[type="number"], input[type="password"], input[type="radio"], input[type="range"], input[type="reset"], input[type="search"], input[type="submit"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"]

// , input[type="file"]

input[type="color"], input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="image"], input[type="month"], input[type="number"], input[type="password"], input[type="range"], input[type="tel"], input[type="text"], input[type="time"], input[type="url"], input[type="week"], input[type="search"], textarea, select {
  border: $menu-border;
  padding: round($fs-normal * 0.2);
  @include box-sizing(content-box);
  @include border-radius($default-border-radius);
  background: #F9F9F9;
  font-size: $fs-normal;
  line-height: round(1.4 * $fs-normal);
  height: round(1.4 * $fs-normal);
  vertical-align: middle;
  //  @include box-shadow(0 2px round($fs-normal/2) rgba(black, 0.1) inset, 0 0 round($fs-normal*0.6) rgba(white, 0.6));
  @include box-shadow(0 2px round($fs-normal/2) rgba(black, 0.1) inset);
  @include transition(box-shadow 0.2s, border-color 0.2s);
  &:focus {
    background: #FFF;
    border-color: $base-color;
    @include box-shadow(0 0 round($fs-normal*0.6) rgba($base-color, 0.6));
  }
}
textarea {
  min-height: 3em;
}

// , input[type="radio"], input[type="hidden"], input[type="button"], input[type="checkbox"], input[type="reset"], input[type="search"], input[type="submit"]



#top {
  margin-bottom: 0;
  @include background-active-gradient;
  @include box-shadow(0 0 $fs-normal rgba(#000, 0.2));
  height: $topbar-height;

  a {
    display: block;
    height: $topbar-height;
    line-height: $topbar-height;
    vertical-align: middle;
    padding: 0 round($fs-normal * 1);
    &, i {
      color: white;
    }
    font-weight: bold;
    &:hover {
      @include background(rgba(black, 0.07));
      // @include box-shadow(0 0 round($fs-normal *0.7) rgba(black, 0.5) inset);
      @include transition(background 0.4s, box-shadow 0.4s);
    }
  }

  li.dropdown {
    position: relative;
  }

  ul.dropdown-menu {
    @include dropdown-menu;
  }

  .collapse {
    > ul {
      @include float(left);
      height: $topbar-height;
    }
  }

  ul {
    li {
      @include float(left);
      display: block;
      height: $topbar-height;
      &.separator {
        width: 0;
	@include border-right(1px solid lighten($active-color, $default-lightness-variation));
	@include border-left(1px solid darken($active-color, $default-lightness-variation));
      }
    }
  }

  li.active > a, a.active{
    @include background(rgba(black, 0.2));
    @include box-shadow(0 0 round($fs-normal *0.7) rgba(black, 0.2) inset);
  }

  #home {
    @include float(left);
    display: none;
    i {
      @include is-icon(21px);
      @include use-icon(home);
    }
  }

  #brand {
    @include float(left);
    i {
      @include is-icon(24px);
      @include use-icon(ekylibre);
      color: white;
      vertical-align: middle;
    }
    h1 { display: none; }
  }

  #module {
    @include ellipsis;
    display: none;
    text-align: center;
    font-size: round($fs-normal * 1.1);
  }

  #menu {
    @include float(right);
    display: none;
    i {
      @include is-icon(21px);
      @include use-icon(reorder);
    }
  }


  #user {
    @include float(right);
    & > li:first-child > a > i {
      @include is-icon;
      @include use-icon(caret-down);
    }
    #user-menu {
      // i { @include is-icon };
      .user    i { @include use-icon(user) };
      .signout i { @include use-icon(signout) };
    }
  }

  #modules {
    overflow: hidden;
  }

  @media only screen and (max-width: $mini-screen){
    overflow: hidden;
    .collapse {
      display: none;
    }
    #home, #menu, #module {
      display: block;
    }

    #brand > i {
      @include is-icon(21px);
      @include use-icon(ekylibre-alt);
    }
  }

}



li.dropdown {
  position: relative;
}

ul.dropdown-menu {
  @include dropdown-menu;
}

.btn-export {
  position: relative;
  i {
    @include use-icon(print);
  }
}





$header-height: 40px;


html.backend {
  background: #F7F7F7;
  height: 100%;
  body {
    background: transparent;
    height: inherit;
    @media only screen and (min-width: $mini-screen + 1px){
      overflow: hidden;
    }
    #wrap {
      max-width: 100%;
      & > #main {
        overflow: auto;
        #header {
          padding: 0;
          margin: 0;
          height: $header-height;
          background: #EEE;
          h1 {
            padding: $default-gap;
            $h1-height: $header-height - 2* $default-gap;
            @include ellipsis;
            font-weight: bold;
            line-height: $h1-height;
            height: $h1-height;
            font-size: round($h1-height / 1.2);
            vertical-align: middle;
            * {
              font-size: inherit;
              line-height: inherit;
              vertical-align: inherit;
            }
            @media only screen and (max-width: $mini-screen){
              text-align: center;
            }
          }
        }
      }
      & > #side {
        height: 100%;
        @include background(rgba(black, 0.05));
        #user {
          display: none;
        }
      }
      & > #help {
        height: 100%;
        display: none;
      }

      @media only screen and (max-width: $mini-screen){
        & > #side {
	  display: none;
	}
        & > #main {
	  width: 100%;
	}
        &.mini-screen-show-side {
          & > #side {
            display: block;
            border-right: none;
            width: 100%;
            #user {
              display: block;
            }
          }
          & > #main {
	    display: none;
          }
        }
      }

      $side-width: 200px;
      @media screen and (min-width: $mini-screen + 1px){
        // @include grid-row();
        @include calc(height, "100% - 32px");
        max-width: 100%;
        & > #side {
         //@include grid-column(2, $float: left, $collapse: true);
          border-right: 1px solid #AAA;
          width: $side-width - 1px;
          height: 100%;
          overflow-y: auto;
          @include float(left);
        }
        & > #main {
          //@include grid-column(10, $float: left, $collapse: true);
          @include float(left);
          @include calc(width, "100% - #{$side-width}");
          height: 100%;
          #content {
            @include calc(height, "100% - #{$header-height}");
            overflow: auto;
          }
        }
      }
    }

  }
  @media screen and (min-width: $mini-screen){
    &[dir="ltr"] {
      & > body > #wrap > * { float: left }
    }
    &[dir="rtl"] {
      & > body > #wrap > * { float: right }
    }
  }

}

html.authentication {
  background: #F7F7F7;
  @include background(radial-gradient(top, #FFF, #F7F7F7, #C2C2C2));
  height: 100%;
  body {
    background: transparent;
    height: 100%;
    #wrap {
      width: 100% !important;
      background: transparent;
      border-top: 2px solid $active-color;
      #main {
        background: transparent;
        margin: 60px auto;
        width: 40%;
        @include respond-to(small) {
          margin: auto;
          width: 100%;
        }
        #content {
          background: #FFF;
          @include incrust-shadow;
          padding: 20px;
          .logo {
            text-align: center;
            img {
              max-width: 100%;
            }
          }
          form {
    	    max-width: 300px;
            margin: $fs-large auto;
          }
          h2 {
            font-size: $fs-large;
            line-height: round(1.6*$fs-large);
	    margin-bottom: round(0.4*$fs-large);
          }
          label {
            display: inline;
            line-height: round(1.6*$fs-normal);
          }
          input {
            display: inline;
            width: 100%;
              @include box-sizing(border-box);
              height: 2 * $fs-normal;
            &[type="submit"] {
              text-align: center;
              margin: 10px auto;
	      display: block;
            }
          }
        }
      }
    }
  }
}

#main-toolbar {
  @include toolbar();
  @include float(right);
  margin-top: round(($header-height - $button-height) / 2);
  @include margin-right($default-gap);
  .btn-group-default {
    .btn {
      font-size: 0;
      .icon, i { margin: 0; }
      .text { display: none; }
    }
  }
}

#about-us {
  .logo {
    margin: 20px auto;
  }
  dl {
    display: block;
    margin: 0 auto;
    dt {
      font-weight: bold;
      margin-top: round(0.5*$fs-normal);
    }
    dd {
      @include margin-left(2*$fs-normal);
    }
  }
  width: 40%;
  margin: 0 auto;
  @include respond-to(small) {
    width: 100%;
  }
}

#major-accounts {
  @include tab-pills;
  margin: 0 $default-gap $default-gap;
}

#journals-nav {
  @include tab-pills;
  margin: 0 $default-gap $default-gap;
  dd {
    a i {
      @include is-icon;
      @include use-icon(book);
    }
    &.special a i {
      color: $important-color;
    }
  }
}

#journal-views {
  @include tab-pills;
  margin: 0 $default-gap $default-gap;
  dd i {
    @include is-icon;
    @include use-icon(eye-open);
  }
}

#subtitle {
  padding: $default-gap;
  font-weight: bold;
  line-height: 1.4 * $fs-large;
  font-size: $fs-large;
  color: #777;
}


.snippet {
  .snippet-title {
    display: block;
    outline: none;
    i.collapser {
      @include is-icon;
      @include use-icon(collapse-alt);
      @include float(right);
      margin-top: round(0.36 * $fs-normal);
      @include margin-right(round(0.3 * $fs-normal));
      display: none;
    }
    h3 {
      $fs: $fs-normal;
      font-weight: bold;
      font-size: $fs;
      padding: round($fs * 0.3) round($fs * 0.4);
      line-height: 1.4*$fs;
      @include ellipsis;
      i {
        @include is-icon;
        @include use-icon(cog);
        @include margin-right($default-gap * 0.5);
      }
    }
  }
  &.collapsed {
    > .snippet-title {
      > i.collapser {
        display: block;
        @include use-icon(caret-down);
      }
    }
  }
  &.active {
    .snippet-title {
      h3, i {
        color: mix($text-color, $active-color);
      }
    }
  }
  @each $icon in $icon-names {
    &.snippet-#{$icon} > .snippet-title > h3 > i {
      @include use-icon($icon);
    }
  }

  margin-top: $default-gap;
  &:first-child {
    margin-top: round($default-gap * 0.5);
  }

  .snippet-content {
  ul {
    $transp: 40%;
    li {
      display:block;
      margin-top: -1 * $menu-border-width;
      $padding: round($fs-normal*0.7);
      a {
          background: white;
          display:block;
          padding: $padding;
          border: $menu-border;
          border-left: none;
          border-right: none;
          @include ellipsis;
        }
        &:first-child {
          margin-top: 0;
          a {
	    // @include border-top-radius($default-border-radius);
          }
        }
        &:last-child a {
	  // @include border-bottom-radius($default-border-radius);
        }
        &:hover a {
          background: mix(white, $menu-border-color, 80%);
          text-decoration: none;
          @include transition(background 0.2s linear);
        }
        &.current, &.active {
          position: relative;
          z-index: 2;
          a {
            //background: $base-color;
            @include background-active-gradient;
            padding: $padding + 1;
            border: none;
            color: white;
          }
        }
     }
   }
  }
}

form.search {
  display: block;
  padding: round($fs-normal * 0.20) round($fs-normal * 0.50);
  input {
    $padding: 0.8em;
    padding-left: $padding;
    padding-right: $padding;
    @include border-radius(1000px);
    width: 100%;
    @include calc(width, "100% - #{2 * $padding} - #{2 * $menu-border-width}");
    display: block;
  }
}

.picture {
  background: white;
  border: 1px solid #DDDDDD;
  box-shadow: 0 0 7px rgba(0, 0, 0, 0.2);
  @include float(left);
  @include margin-right($default-gap);
  padding: 7px;
}

.info {
  @include ellipsis;
  &, & * {
    font-size: $fs-large;
    line-height: round($fs-large * 1.4);
    vertical-align: baseline;
  }
  span.title {
    width: 20%;
    @include text-align(right);
    color: #777;
    // @include padding-right($default-gap);
  }
  span.value {
    &, & * {
      font-weight: bold;
    }
  }
}

.attributes-list {
  @include column-count(3);
  @include column-gap(2em);
  @include respond-to(small) {
    @include column-count(1);
  }
  @include respond-to(medium) {
    @include column-count(2);
    @include column-gap(1.5em);
  }
//  @include respond-to(large) {
//    @include column-count(4);
//  }
  $label-width: 40%;
  margin-bottom: 1em;
  &:last-child {
    margin-bottom: 0;
  }
  dl {
    @include inline-block;
    @include clearfix;
    margin: 0;
    padding: 2px 0;
    width: 100%;
    dt, dd {
      font-size: $fs-normal;
      line-height: round(1.4*$fs-normal);
    }
    dt {
      @include item-label;
      width: 0.95*$label-width;
      @include float(left);
      @include ellipsis;
    }
    dd {
      @include margin-left($label-width);
      .checkbox-true, .checkbox-false {
        display: inline;
        vertical-align: middle;
      }
    }
  }
}


#legals, footer {
  font-size: $fs-small;
  line-height: round(1.4*$fs-small);
  @include text-align(center);
  padding: round(0.7*$fs-small);
  color: rgba(#000,0.6);
  @include text-shadow(1px 1px 1px #FFF);
}













.content {
  $content-font-size: round($fs-normal);
  clear: both;
  &, p, * {
    vertical-align: baseline;
    color: $text-color;
    line-height: 1.2em;
    font-size: $content-font-size;
    text-align: justify;
  }
  text-align: justify;
  h1 {
    @include title($fs-large);
    margin: 0 0 $default-gap;
    font-variant: small-caps;
  }
  h2 { @include title($fs-normal); margin: 8px 0 4px; border-bottom: $menu-border; }
  h3 { @include title($content-font-size); margin: 4px 0 2px 10px; color: $text-color; }
  pre { font-family: "Liberation Mono", monospace; color: #777; background: #FFF; padding: $default-gap; margin: $default-gap 0; }
  strong { font-weight: bold; }
  em { font-style: italic; }
  ul, ol {
    padding: 0;
    @include padding-left(1.3*$content-font-size);
    margin: 0 0 $default-gap 0;
  }
  ul li { list-style-type: square; }
  ol li { list-style-type: decimal; }
  dl {
    padding: 0 0.1em; margin-bottom: 0.2em;
    dt { margin-top: .2em; font-weight: bold; color: #210 }
    dd { margin-bottom: .2em; margin-left: 1em; }
  }
  a img { border: $menu-border-width solid $link-color; padding: $menu-border-width; }
  p {
    /*@include text-align(justify);*/
    margin: 0 0 $default-gap 0;
    &.notice { border-left: $default-gap solid #7A4; background: #CE8; padding: round($default-gap/2) $default-gap; }
    &.warning { border-left: $default-gap solid #FA0; background: #FD9; padding: round($default-gap/2) $default-gap; }
  }
  .text-end { height: 1px; }
  .help-error {  @include text-align(center); margin: $default-gap 0; color: mix($text-color, $menu-background, 50%); @include text-shadow($menu-border-width $menu-border-width 0 $desktop-background) }
  .md {
    display:block;
    &.md-center { margin: round($default-gap/2) auto; }
    &.md-left   { margin: round($default-gap/2); @include float(left); }
    &.md-right  { margin: round($default-gap/2); @include float(right); }
  }
  .icon {
    @include is-icon;
    @include use-icon(cog);
    @each $symbiol in $symbiols {
      $symbol-name: nth($symbiol, 1);
      $symbol-code: nth($symbiol, 2);
      &.icon-#{$symbol-name} {
        @include icon($symbol-code);
      }
    }
  }
  .icon.icon-abort { @include use-icon(trash) }
  .icon.icon-cancel { @include use-icon(undo) }
  .icon.icon-destroy { @include use-icon(remove) }
  .icon.icon-down    { @include use-icon(chevron-down) }
  .icon.icon-new     { @include use-icon(plus) }
  .icon.icon-merge   { @include use-icon(resize-small) }
  .icon.icon-divide  { @include use-icon(resize-full) }
  .icon.icon-duplicate  { @include use-icon(copy) }
  .icon.icon-load       { @include use-icon(refresh) }
  .icon.icon-statistics { @include use-icon(bar-chart) }
  .icon.icon-index      { @include use-icon(print) }
  .icon.icon-unvalidateds { @include use-icon(ok)}
  .icon.icon-close { @include use-icon(lock)}
}


.flash {
  padding: round(0.6*$default-gap) $default-gap;
  margin: 0 $default-gap $default-gap;
  vertical-align: middle;
  color: $text-color;
  @include border-radius($default-border-radius);
  @include incrust-shadow;
  &, & * {
    text-shadow: 1px 1px 0 rgba(#000, 0.3);
  }
  .icon {
    font-size: $fs-normal;
    line-height: round(1.4*$fs-normal);
    @include is-icon($fs-normal + 2px);
    display: inline;
    vertical-align: middle;
    @include margin-right($default-gap);
  }
  .message {
    display: inline;
    h3 {
      display: none;
      font-size: $fs-normal;
      line-height: round(1.4*$fs-normal);
      font-weight: bold;
      $gap: floor(($default-gap - $menu-border-width)/2);
      padding: 0 0 $gap;
      margin-right: $default-gap - $menu-border-width - $gap;
    }
    p {
      display: inline;
      font-size: $fs-normal;
      line-height: round(1.4*$fs-normal);
      font-weight: bold;
    }
    ul {
      padding: round($fs-normal/4);
      @include padding-left(round(1.2*$fs-normal));
      li { list-style-type: square; }
    }
  }
  @each $level in (error #D31 remove-circle), (warning #F81 warning-sign), (success #6A0 ok-circle), (information $active-color info-sign) {
    $level-name: nth($level, 1);
    $level-color: nth($level, 2); // change-color(nth($level, 2), $lightness: 65%);
    &.#{$level-name} {
      @include background(linear-gradient(top, lighten($level-color, $default-lightness-variation), $level-color, darken($level-color, $default-lightness-variation)));
      &, & * { color: visible-color($level-color); }
      .icon { @include use-icon(nth($level, 3)); }
    }
  }
  .close {
    opacity: 0.6;
    display: block;
    @include float(right);
    font-size: 18px;
    font-weight: bold;
    margin-right: -4px;
    padding: 0 4px;
    vertical-align: middle;
  }
}

.checkbox-true, .checkbox-false {
  @include is-icon(14px);
  width: 14px;
  &:hover {
    cursor: default;
    pointer-events: none;
  }
}
.checkbox-true { @include use-icon(check); }
.checkbox-false { @include use-icon(check-empty); }



.fieldset {
  @include border-radius($default-border-radius);
  $vertical-gap: round($default-gap*0.7);
  padding: 0;
  margin: 0 $default-gap $default-gap;
  $fieldset-border: $menu-border;
  border: $fieldset-border;
  @include incrust-shadow;
  $size: $fs-normal;
  background: white;
  .fieldset-legend {
    padding: $vertical-gap $default-gap;
    cursor: pointer;
    label, span {
      color: $neutral-color;
      font-size: $size;
      line-height: round(1.2*$size);
    }
    font-weight: bold;
    vertical-align: middle;
    .icon {
      @include is-icon;
      @include inline-block;
      @include use-icon(file);
      color: $neutral-color;
      @include margin-right(round($size/4));
    }
    .toggle {
      @include inline-block;
      @include float(right);
      $tool-size: round(0.95 * $fs-normal);
      width: $tool-size;
      height: $tool-size;
      @include is-icon();
      margin: round(($size - $tool-size)/2) 0 0;
    }
    &.collapsed .toggle     { @include use-icon(expand-alt); }
    &.not-collapsed .toggle { @include use-icon(collapse-alt); }
    &:hover span {
      color: $base-color;
      @include transition(color 0.2s linear);
    }
  }
  @each $field_set in (delay time), (document briefcase), (general-informations book), (stock exchange), (group group), (movement exchange), (accountancy money), (coordinates map-marker), (amount money), (vegetable wheat), (genealogy sitemap), (animal cow), (entity user), (reservoir beaker), (indicator dashboard), (analytics cogs), (measure_options dashboard), (string_options comment), (decimal_options list-ol), (choice_options list), (products wheat){ //asset,
    &##{ nth($field_set, 1) }.fieldset .fieldset-legend .icon {
      @include use-icon(nth($field_set, 2));
    }
  }

  .fieldset-fields {
    //border-top: $fieldset-border;
    border-top: 2px solid $active-color;
    margin: 0 $default-gap $vertical-gap;
    padding: 0;

    .input {
      padding: round($fs-normal*0.2) 0;
      margin: round($fs-normal*0.1) 0;

      .control-label {
        width: 25%;
        @include float(left);
        line-height: 1.4*$fs-normal;
        @include inline-block;
        @include margin-right(round($fs-normal/2));
        &.required {
          abbr {
            color: red;
            float: right;
          }
        }
      }
    }
    textarea {
      width: 70%;
      resize: vertical;
    }
    input{
      max-width: 65%;
    }

  }
}

.help-inline {
  display: inline-block;
  *display: inline;
  padding-left: 5px;
  vertical-align: middle;
  *zoom: 1;
  color:  rgb(237, 0, 78);
}

input[data-selector] {
  display: inline;
  margin-bottom: 0;
}


a.selector-dropdown {
  @include button();
  .icon {
    @include use-icon(caret-down);
  }
}

span.selector, .input-append {
  // @include inline-block;
  @include toolbar;
  position: relative;
}


$controls-margin-left: round($label-width * 1.1);

.control-group {
  margin: round($fs-normal/4) 0;
  padding: round($fs-normal/4) 0;
  @include clearfix;
  .control-label {
    width: $label-width;
    @include float(left);
    line-height: round(1.4*$fs-normal);
    margin: round($fs-normal/4) 0;
    @include display(block);
    @include ellipsis;
    &.required {
      abbr {
        color: red;
        float: right;
      }
    }
  }
  .controls {
    @include margin-left($controls-margin-left);
    width: 100% - $controls-margin-left;
    input, select, textarea {
      max-width: 100% - $controls-margin-left;
    }
    .btn-new {
      .icon { @include margin-right(0); }
      .text { display: none; }
    }
  }
//  &.selector .controls .input {
//    @include toolbar;
//   }
}

.input-append {
  // @include button-group;
  .btn {
    .text { display: none; }
    .icon { margin-left: 0; margin-right: 0; }
  }
}



span.rad, label.radio {
  padding: round($fs-normal/8) 0;
  @include margin-left(round($fs-normal/2));
  * { vertical-align: middle; }
  &:first-child {
    @include margin-left(0);
  }
  input {
    @include margin-right($fs-normal/4);
  }
}


$form-actions-height: 48px;
.form-actions {
  margin: 0;
  padding: 0;
  $padding-top: round(($form-actions-height - 1px - $button-height) / 2);
  padding-top: $padding-top;
  height: $form-actions-height - $padding-top - 1px;
  border-top: 1px solid rgba(black, 0.10);
  @include text-align(center);
  vertical-align: middle;
  input, a, span {
    @include text-align(center);
    @include margin-left($fs-normal);
    &:first-child { @include margin-left(0) }
  }
  @include background(linear-gradient(rgba(black, 0.05), rgba(black, 0), rgba(black, 0.06)));
}


.ui-dialog {
  .ui-dialog-content {
    & > form {
      margin: 0;
      padding: 0;
      height: inherit;
      overflow: hidden;
      & > .form-fields {
        @include calc(height, "100% - #{$form-actions-height + 2 * $default-gap}");
        overflow: auto;
        margin: 0;
        padding: $default-gap 0;
      }
    }
  }
}


.kujaku {
  color: #580;
  margin: 0 $default-gap $default-gap;
  padding: $default-gap;
  background: $neutral-background;
  @include border-radius($default-border-radius);
  @include clearfix;
  $search-width: 60px;
  .crits {
    padding: 0;
    @include margin-right($search-width);
    .crit {
      border-top: $menu-border-width solid darken($neutral-background, 5%);
      // padding: round($fs-normal/6) round($fs-normal/4);
      padding: round($default-gap * 0.6);
      vertical-align: middle;
      text-align:center;
      label { color: $neutral-color; }
      &:first-child {
        border-top: none;
        padding-top: 0;
      }
      &:last-child {
        padding-bottom: 0;
      }
    }
  }
  .submit {
    padding: 0;
    width: $search-width - $default-gap;
    text-align: center;
    @include float(right);
    button {
      display: block;
      padding: $default-gap;
      font-size: 0;
      i {
        @include is-icon(24px);
        @include use-icon(search);
      }
    }
  }
  input, label, select {
    display: inline;
    margin-bottom: 0;
    width: auto;
  }

  &.popover {
    display: none;
    position: absolute;
    right: $default-gap;
    top: 80px;
    z-index: 10000;
    margin: 0;
    background: white;
    @include box-shadow(0 0 $fs-small rgba(#000, 0.5));
    @include border-radius($default-border-radius);
  }
}



#help {
  display: none;
  float: left;
  @include box-shadow(0 0 15px rgba(#000, 0.3));
  background: white;
  position: absolute;
  width: 30*$fs-normal;
  left:$menu-width+$fs-normal;
  top: $fs-normal;
  padding: 0;
  z-index: 10000;
  @include calc(height, "100% - #{2 * $fs-normal}");
  overflow: auto;
  .content {
    @include calc(height, "100% - #{2 * $default-gap}");
    padding: $default-gap round($default-gap * 1.4);
  }
}

.ui-dialog {
  position: absolute;
  background: transparent;
  border: $default-gap solid rgba(black, 0.5);
  $radius: $default-gap + $default-border-radius;
  @include border-radius($radius);
  @include box-shadow(0 0 $radius rgba(0, 0, 0, 0.3));
  overflow: hidden;
  .ui-dialog-titlebar {
    padding: 4px;
    //height: 16px;
    //background: $base-color;
    @include background-active-gradient;
    .ui-dialog-title {
      margin: 4px;
      font-weight: bold;
      font-size: $fs-large;
      $line-height: round($fs-large * 1.4);
      line-height: $line-height;
      height: $line-height;
      color: white;
      @include text-shadow(0 0 3px rgba(0,0,0,0.5));
    }
    .ui-dialog-titlebar-close {
      float: right;
      @include is-icon;
      @include use-icon(remove);
      color: $text-color;
      @include opacity(0.3);
      margin-top: 3px;
      height: 16px;
      width: 16px;
      span.ui-icon {
        display: none;
      }
      &:focus, &:active, &:hover {
	@include opacity(0.5);
      }
    }
  }
  .ui-dialog-content {
    background: #F7F7F7;
    clear: both;
    position: relative;
    border: 0;
    overflow: auto;
    zoom: 1;
    padding: 0; // $default-gap;
  }
}

.ui-widget-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(black, 0.15);
}


.ui-datepicker {
  display:none;
  background: $menu-background;
  padding: 4px;
  border: 1px solid #AAA;
  @include border-radius(3px);
  @include box-shadow(0 0 5px rgba(0,0,0,0.3));
  $title-line-height: 16px;
  .ui-datepicker-prev {
    float: left;
    line-height: $title-line-height;
    display: block;
    width: 16px;
    height: 16px;
    @include is-icon;
    @include use-icon(chevron-left);
    cursor: default;
    margin: 4px 3px 0;
    .ui-icon { display: none }
  }
  .ui-datepicker-next {
    float: right;
    line-height: $title-line-height;
    display: block;
    width: 16px;
    height: 16px;
    @include is-icon;
    @include use-icon(chevron-right);
    cursor: default;
    margin: 4px 3px 0;
    .ui-icon { display: none }
  }
  .ui-datepicker-title {
    padding: 4px;
    @include text-align(center);
    line-height: $title-line-height;
    * { font-weight: bold; }
  }
  table {
    border-collapse: separate;
    border-spacing: 2px;
    th {
      @include text-align(center);
      font-weight: bold;
      padding: 4px;
    }
    td {
      border: 1px solid mix($base-color, #FFF, 15%);
      padding: 0;
      @include text-align(center);
      &.ui-datepicker-current-day {
        font-weight: bold;
        background: rgba($base-color, 0.2);
      }
      &:hover {
        border: 1px solid #FFF;
        background: $base-color;
        a {
          color: white;
        }
      }
      &.ui-datepicker-unselectable {
        border: none;
        background: transparent;
      }
      a {
        display: block;
        padding: 4px;
        width: 4ex;
        @include text-align(center);
      }
    }
  }
}

input[data-date], input[data-datepicker] {
  @include text-align(center);
  width: 12ex;
}







.items-menu {
  position: absolute;
  @include float(left);
  background: white;
  border: 1px solid #AAA;
  z-index: 4;
  @include incrust-shadow;
  .items-list {
    $item-padding: round($default-gap / 2);
    $height: $fs-normal * 1.2;
    max-height: ($height + 2 * $item-padding) * 12;
    min-width: 350px;
    overflow-y: auto;
    li {
      height: $height;
      line-height: $height;
      padding: $item-padding;
      @include ellipsis;
      *, & * { vertical-align: baseline; }
      strong { font-weight: bold }
      &.selected {
        background: rgba($base-color, 0.2);
        cursor: pointer;
      }
      &.special {
        font-style: italic;
      }
    }
  }
  .items-status {
    display: block;
    padding: $default-gap;
    background: #EFE;
    font-style: italic;
  }
}

.stepper {
  display: block;
  border: none;
  background: $base-color;
  $step-padding:round($default-gap * 0.8);
  padding: round($fs-normal * 0.15) (round($fs-normal * 0.45));
  margin: 0 0 $default-gap;
  .step {
    text-align: center;
    @include inline-block;
    margin-right: 0;
    a {
      display: block;
      text-align: center;
      line-height: round(1.4 * $fs-normal);
      height: round(1.4 * $fs-normal);
      padding: round($step-padding * 0.2);
      background: white;
    }
    &.disabled a {
      color: $neutral-color;
      cursor: default;
      pointer-events: none;
    }
  }
  $height: round(1.4 * $fs-normal) + 2 * $step-padding;
  .transition {
    width: 0px;
    height: 0px;

    @include inline-block;
    border: $height/2 solid $base-color;
    border-left-color: white;
  }
  @for $i from 1 through 30 {
    &.stepper-#{$i}-steps {
      .step {
        @include calc(width, "(100% - #{($i - 1)*$height}) / #{$i}");
      }
    }
  }
}

.control-group.hidden {
  display: none;
}
.nested-fields {
  position: relative;
  .nested-remove {
    @include float(right);
    position: absolute;
    @include right(0);
    @include display(block);
    font-size: 0;
    i {
      @include is-icon;
      @include use-icon(remove);
    }
  }
}
.links {
  margin-bottom: $fs-normal;
  .nested-add {
    @include margin-left($controls-margin-left);
  }
}


.affair {
  .deals {
    //@include padding-left(4em);
    width: 100%;
    border-collapse: collapse;
    border: none;
    padding: 0;
    margin: 0;
    tr {
      list-style-type: decimal;
      &, & * {
        font-size: $fs-normal;
	line-height: round($fs-normal*1.4);
	vertical-align: baseline;
      }
      .dealt-on { width: 16ex; }
      .amount {
        @include text-align(right);
        &.credit {
	  &, & * { color: red }
	}
        &.debit {
          &, & * { color: green }
	}
        &, & * {
          font-weight: bold;
        }
      }
    }
    tfoot.total {
      &, & * {
        @include text-align(right);
        font-weight: bold;
        background: none;
      }
      .sum {
        border-top: 1px solid #777;
      }
    }
  }

}

#cell-date {
  display: block;
  padding: 0;
  margin: $default-gap;
  > span {
    display: block;
    padding: 0;
    margin: 0;
    text-transform: lowercase;
    text-align: center;
    &.day-name {
      font-size: 3 * $fs-normal;
    }
    &.day {
      font-size: 8 * $fs-normal;
    }
    &.month {
      font-size: 3 * $fs-normal;
    }
    &.year {
      font-size: 4 * $fs-normal;
    }
  }
}


.rss-feed {
  .rss-title {
    font-size: $fs-large;
    margin-bottom: $default-gap;
  }
  .rss-entries {
    // max-height: 400px;
    // overflow-y: scroll;
    a.rss-entry {
      display: block;
      padding: $default-gap;
      border-top: 2px solid $active-color;
      &:first-child {
        border-top: none;
      }
      @include background(linear-gradient(top, rgba(#FFF, 0), rgba(#000, 0.1)));
      .rss-entry-title {
        color: $base-color;
        i {
          color: $base-color;
          @include is-icon(14px);
          @include use-icon(external-link);
        }
      }
      .rss-entry-summary { color: #777; margin-bottom: 0}
      .rss-entry-published { font-size: $fs-small; color: #777;}
    }
  }
}

ul.tree {
  $height: round(2.7 * $fs-normal);
  $width: 2 * $fs-normal;
  $border-width: 2px;
  $space: round(($height - $border-width) / 2);
  $wspace: round(($width - $border-width) / 2);
  $border: $border-width solid black;
  ul {
    margin-left: $width;
    & > li {
      .item {
        display: block;
        @include clearfix;
        & > .drift {
          @include inline-block;
          width: $wspace;
          margin-left: $wspace;
          border-left: $border;
          & > .drift {
            @include inline-block;
            border-top: $border;
            width: 100%;
            height: $space;
            margin-top: $space;
          }
        }
        i {
          @include is-icon;
          color: darken($base-color, 40%);
          margin: 0 round($fs-normal * 0.2);
        }
        .tool-adder {
          @include inline-block;
          * { vertical-align: bottom }
        }
        .tool-label {
          @include inline-block;
          @include ellipsis;
        }
        .attribute {
          font-style: italic;
          color: #AAA;
        }
        .tool-comparator, .tool-position, .tool-delete {
          @include float(right);
          @include margin-left(round($fs-normal * 0.2));
        }
      }
      &.reflection > .item > i {
        @include use-icon(share-alt);
      }
      &.column > .item > i {
        @include use-icon(columns);
      }
      &:last-child {
        > .item {
          & > .drift {
            border-left: none;
            & > .drift {
              border-top: none;
              border-left: $border;
              border-bottom: $border;
              height: $space;
              margin: 0 0 $space 0;
	    }
          }
	}
      }
    }
  }
  & > li > ul {
    margin-left: 0;
  }
}

.select-product {
  @include box-emphasis;
}


.search {
  .results {
    padding: $default-gap;
    li {
      border-top: 2px solid $active-color;
      @include background(linear-gradient(top, rgba(#FFF, 0.1), rgba(#777, 0), rgba(#000, 0.1)));
      padding: $default-gap;
      display: block;
      * { line-height: round(1.4 * $fs-normal); }
      h3 {
        a {
        }
        small {
          color: #AAA;
        }
      }
      p {
        &, * {
          color: #777;
        }
      }
      &:first-child {
        border-top: none;
      }
    }
  }

  .pagination {
    padding: $default-gap;
    span, a {
      @include inline-block;
      padding: $default-gap * 0.75;
      margin: $default-gap * 0.2;
      @include border-radius(1000px);
      &.active {
        font-weight: bold;
        @include box-shadow(0 0 $default-gap rgba(black, 0.1) inset);
      }
    }
    a {
      background: #DDD;
      &.beginning {
        i {
          @include is-icon;
          @include use-icon(bullseye);
        }
      }
    }
  }
}

svg.map {
  fill: #EEE;
  background: #EEE;
  path {
    fill: #AAA;
  }
  a:hover path {
    fill: $active-color;
    @include transition(fill 0.2s linear);
  }
}


#demo-pie, #demo-map, #product-bar-chart, #bank-chart, #expense-chart {
  text-align: center;
  > *, embed {
    margin: 0 auto;
    text-align: center;
    max-width: 100%;
  }
}

/* Pop overs */

#help {
  display: none;
}

/* Calendar */
/* @FIXME : need to be update ! */

.calendar {
  margin: auto;
}

.monthName th {
  font-weight: normal;
  text-align: right;
  padding-top: 1em;
  padding-bottom: 0.7em;
}

.dayName th {
  font-size: 0.7em;
  padding-top: 0.6em;
  padding-bottom: 0.3em;
  background-color: #303030;
  color: white;
}

.otherMonth, .day, .specialDay {
  padding: 0.7em 1em;
  border-right: 1px solid white;
}

.otherMonth {
  color: #eeeeee;
  background-color: white;
}

.day {
  text-align: center;
  border-bottom: 1px dotted #bbbbbb;
  background-color: #bbccff;
}

.specialDay {
  text-align: center;
  border-bottom: 1px dotted #bbbbbb;
  background-color: #bbccff;
  background-color: #003355;
  color: white;
  a {
    color: white;
    text-decoration: none;
    padding: 1em;
    &:visited {
      color: white;
      text-decoration: none;
      padding: 1em;
    }
    &:hover {
      color: white;
      text-decoration: none;
      padding: 1em;
      color: white;
      background-color: black;
    }
  }
}

.weekendDay {
  background-color: #ffffdd;
}

.today {
  background-color: #4682b4;
}

.weekNumber {
  background-color: #dedede;
}